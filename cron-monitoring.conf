# Lunar Blood Monitoring Cron Configuration
# Add these lines to /etc/cron.d/lunarblood or user's crontab

# Run health checks every 4 hours during business hours (9 AM - 6 PM)
0 9,13,17 * * 1-5 cd /home/joshua/Documents/lunarblood && ./health-check.sh verbose alert

# Run comprehensive monitoring daily at 6 AM
0 6 * * * cd /home/joshua/Documents/lunarblood && ./monitor.sh daily

# Run weekly monitoring every Monday at 7 AM
0 7 * * 1 cd /home/joshua/Documents/lunarblood && ./monitor.sh weekly

# Log rotation daily at 2 AM
0 2 * * * /usr/sbin/logrotate /etc/logrotate.d/laravel

# Backup verification daily at 8 AM
0 8 * * * cd /home/joshua/Documents/lunarblood && [ -f "/var/backups/lunarblood/$(date +\%Y\%m\%d)*.sql.gz" ] || echo "Backup missing for $(date +\%Y\%m\%d)" | mail -s "Backup Alert" admin@graveyardjokes.com

# SSL certificate check weekly
0 9 * * 0 openssl s_client -connect lunarblood.com:443 2>/dev/null | openssl x509 -noout -checkend 604800 || echo "SSL certificate expires within 7 days" | mail -s "SSL Certificate Alert" admin@graveyardjokes.com

# Disk space monitoring
*/30 * * * * df / | awk 'NR==2 {if ($5 > 90) print "Disk usage above 90%: "$5}' | mail -s "Disk Space Alert" admin@graveyardjokes.com

# Memory usage monitoring
*/15 * * * * free | awk 'NR==2 {if ($3/$2 * 100 > 85) print "Memory usage above 85%: " $3/$2 * 100 "%"}' | mail -s "Memory Usage Alert" admin@graveyardjokes.com</content>
<parameter name="filePath">/home/joshua/Documents/lunarblood/cron-monitoring.conf